<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Map Video Studio</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Playfair+Display:wght@700&family=Montserrat:wght@400;600&family=Orbitron:wght@700&family=Rajdhani:wght@600&display=swap" rel="stylesheet">

    <style>
        :root {
            --glass: rgba(10, 10, 10, 0.9);
            --border: rgba(255, 255, 255, 0.1);
            --accent: #00D9FF;
            --text: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: var(--text);
            font-family: 'Montserrat', sans-serif;
            height: 100vh;
            overflow: hidden;
        }

        #map {
            width: 100vw;
            height: 100vh;
            background: #0a0a0a;
            transition: filter 0.5s;
        }

        /* UI Layer */
        .ui-overlay {
            position: fixed;
            inset: 0;
            z-index: 1000;
            pointer-events: none;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        /* Top Controls */
        .top-controls {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            pointer-events: auto;
        }

        .brand {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            padding: 8px 20px;
            border-radius: 25px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 3px;
            color: var(--accent);
            text-transform: uppercase;
        }

        .edit-btn {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: 0.3s;
        }

        .edit-btn:hover {
            background: var(--accent);
            color: #000;
        }

        /* Narration Card */
        .narration-card {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(20, 20, 20, 0.9) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-left: 4px solid var(--accent);
            padding: 28px;
            border-radius: 0 16px 16px 0;
            width: 90%;
            max-width: 480px;
            pointer-events: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7);
            transform: translateX(-150%);
            transition: transform 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .narration-card.show {
            transform: translateX(0);
        }

        .card-header {
            font-family: 'Orbitron', sans-serif;
            font-size: 0.75rem;
            color: var(--accent);
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-body {
            font-size: 1.15rem;
            line-height: 1.7;
            color: #fff;
            font-weight: 500;
        }

        /* Controls */
        .controls {
            position: fixed;
            bottom: 35px;
            right: 35px;
            display: flex;
            gap: 14px;
            pointer-events: auto;
        }

        .ctrl-btn {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.25s;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        }

        .ctrl-btn:hover {
            background: var(--accent);
            color: #000;
            transform: translateY(-4px);
            box-shadow: 0 8px 30px rgba(0, 217, 255, 0.3);
        }

        /* Advanced Map Visuals */
        .pulse-dot {
            width: 16px;
            height: 16px;
            background: var(--accent);
            border-radius: 50%;
            box-shadow: 0 0 0 0 rgba(0, 217, 255, 0.8);
            animation: pulse-ring 2.5s ease-out infinite;
        }

        @keyframes pulse-ring {
            0% {
                box-shadow: 0 0 0 0 rgba(0, 217, 255, 0.8);
            }

            70% {
                box-shadow: 0 0 0 25px rgba(0, 217, 255, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(0, 217, 255, 0);
            }
        }

        .arrow-pointer {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 30px solid var(--accent);
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.5));
            animation: bounce-arrow 1.5s ease-in-out infinite;
        }

        @keyframes bounce-arrow {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-15px);
            }
        }

        .map-label {
            background: rgba(0, 0, 0, 0.85);
            color: #fff;
            padding: 8px 16px;
            border-radius: 6px;
            font-weight: 700;
            font-size: 1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.2);
            white-space: nowrap;
        }

        /* Font Variations */
        .f-cinzel {
            font-family: 'Cinzel', serif;
        }

        .f-play {
            font-family: 'Playfair Display', serif;
        }

        .f-orb {
            font-family: 'Orbitron', sans-serif;
        }

        /* Leaflet Overrides */
        .leaflet-control-zoom,
        .leaflet-control-attribution {
            display: none;
        }
    </style>
</head>

<body>

    <div id="map"></div>

    <div class="ui-overlay">
        <div class="top-controls">
            <div class="brand">MAP VIDEO AI</div>
            <button class="edit-btn" data-bs-toggle="modal" data-bs-target="#editorModal">
                <i class="bi bi-gear-fill me-2"></i>EDITOR
            </button>
        </div>

        <div class="narration-card" id="narratorCard">
            <div class="card-header">
                <div class="spinner-border spinner-border-sm text-info" id="ttsSpinner" style="display:none"></div>
                <span id="locTitle">SYSTEM</span>
            </div>
            <div class="card-body" id="locText">
                Load a script and press play to begin your journey.
            </div>
        </div>

        <div class="controls">
            <button class="ctrl-btn" id="btnPlay"><i class="bi bi-play-fill"></i></button>
            <button class="ctrl-btn" id="btnSound"><i class="bi bi-volume-up-fill"></i></button>
            <button class="ctrl-btn" id="btnFull"><i class="bi bi-fullscreen"></i></button>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal fade" id="editorModal" data-bs-backdrop="static">
        <div class="modal-dialog modal-xl modal-dialog-centered">
            <div class="modal-content bg-dark text-light border-secondary">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-info font-monospace">SCRIPT STUDIO</h5>
                    <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs mb-3">
                        <li class="nav-item"><button class="nav-link active" data-bs-toggle="tab" data-bs-target="#tabJson">JSON Editor</button></li>
                        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabPrompt">AI Prompt</button></li>
                        <li class="nav-item"><button class="nav-link" data-bs-toggle="tab" data-bs-target="#tabDocs">Quick Guide</button></li>
                    </ul>
                    <div class="tab-content">
                        <!-- JSON -->
                        <div class="tab-pane fade show active" id="tabJson">
                            <textarea id="jsonEditor" class="form-control bg-black text-success font-monospace border-0" rows="16"></textarea>
                        </div>
                        <!-- Prompt -->
                        <div class="tab-pane fade" id="tabPrompt">
                            <div class="row g-3">
                                <div class="col-12"><input id="pTopic" class="form-control bg-secondary text-white border-0" placeholder="Story Topic (e.g., Journey of Ganges River)"></div>
                                <div class="col-6">
                                    <select id="pStyle" class="form-select bg-secondary text-white border-0">
                                        <option value="dark">Dark (Cinematic)</option>
                                        <option value="satellite">Satellite (Realistic)</option>
                                        <option value="voyager">Voyager (Clean)</option>
                                        <option value="light">Light (Classic)</option>
                                    </select>
                                </div>
                                <div class="col-6"><input id="pLang" class="form-control bg-secondary text-white border-0" value="English"></div>
                                <div class="col-12 mt-3">
                                    <div class="bg-black p-3 rounded">
                                        <pre id="promptOut" class="text-warning mb-0" style="white-space: pre-wrap; font-size: 0.75rem;"></pre>
                                    </div>
                                    <button class="btn btn-outline-warning w-100 mt-2" onclick="copyPrompt()"><i class="bi bi-clipboard-check"></i> COPY</button>
                                </div>
                            </div>
                        </div>
                        <!-- Docs -->
                        <div class="tab-pane fade" id="tabDocs">
                            <div class="bg-black p-3 rounded" style="max-height: 400px; overflow-y: auto;">
                                <h6 class="text-info">Available Event Types:</h6>
                                <ul class="small text-secondary">
                                    <li><code>pan</code> - Smooth camera movement to location</li>
                                    <li><code>zoom</code> - Zoom in/out on area</li>
                                    <li><code>marker</code> - Pulsing point marker</li>
                                    <li><code>arrow</code> - Animated directional pointer</li>
                                    <li><code>circle</code> - Circular highlight area</li>
                                    <li><code>polygon</code> - Custom shape (provide coordinates array)</li>
                                    <li><code>rectangle</code> - Rectangular area (provide bounds)</li>
                                    <li><code>label</code> - Text overlay on map</li>
                                    <li><code>line</code> - Animated route/path</li>
                                </ul>
                                <h6 class="text-info mt-3">Visual Properties:</h6>
                                <p class="small text-secondary">Use <code>"visual"</code> object with: <code>color</code>, <code>size</code>, <code>animation</code> ("pulse", "fade", "grow"), <code>opacity</code></p>
                                <h6 class="text-info mt-3">Auto-Centering:</h6>
                                <p class="small text-secondary">The map automatically centers on each event. Specify <code>"zoom"</code> to override auto-zoom.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button class="btn btn-outline-light" onclick="loadSample()">Load Sample</button>
                    <button class="btn btn-info fw-bold px-4" onclick="runScript()">RUN SCRIPT</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // --- STATE ---
        let map, script = null,
            step = 0,
            playing = false,
            ttsOn = true;
        const synth = window.speechSynthesis;
        let layers = []; // Track all dynamic layers

        // --- THEMES ---
        const THEMES = {
            'dark': 'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
            'light': 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
            'voyager': 'https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png',
            'satellite': 'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
            'street': 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
        };

        // --- INIT ---
        window.addEventListener('load', () => {
            map = L.map('map', {
                zoomControl: false,
                attributionControl: false
            }).setView([20, 0], 2);
            L.tileLayer(THEMES['dark']).addTo(map);

            document.getElementById('btnPlay').onclick = togglePlay;
            document.getElementById('btnSound').onclick = toggleSound;
            document.getElementById('btnFull').onclick = () => {
                if (!document.fullscreenElement) document.documentElement.requestFullscreen();
                else document.exitFullscreen();
            };

            ['pTopic', 'pStyle', 'pLang'].forEach(id => {
                document.getElementById(id).addEventListener('input', genPrompt);
            });
            genPrompt();
        });

        // --- PROMPT GENERATOR ---
        function genPrompt() {
            const topic = document.getElementById('pTopic').value || "[YOUR_TOPIC]";
            const style = document.getElementById('pStyle').value;
            const lang = document.getElementById('pLang').value;

            const prompt = `You are a professional map animation designer.
Generate a JSON script for an interactive map video.

REQUIREMENTS:
- Topic: ${topic}
- Map Style: ${style}
- Language: ${lang}

JSON STRUCTURE (strictly follow):
{
  "title": "Video Title",
  "style": "${style}",
  "map": { "initialCenter": [lat, lng], "initialZoom": number },
  "timeline": [
    {
      "type": "pan" | "zoom" | "marker" | "arrow" | "circle" | "polygon" | "label" | "line",
      "location": [lat, lng] OR array of coordinates for polygon/line,
      "zoom": number (optional - auto-calculated if not provided),
      "visual": { 
        "color": "#HEX", 
        "size": "small|medium|large",
        "animation": "pulse|fade|grow",
        "opacity": 0.0-1.0
      },
      "narration": {
        "title": "Location Name (SHORT)",
        "text": "Narration text (1-2 sentences max for TTS)"
      }
    }
  ]
}

EVENT TYPES EXPLAINED:
- "pan": Move camera to location (auto-centers)
- "marker": Pulsing dot at location (auto-centers)
- "arrow": Directional pointer at location (auto-centers)
- "circle": Circular area highlight (auto-fits bounds)
- "polygon": Custom shape (auto-fits bounds to show full shape)
- "rectangle": Box area (auto-fits bounds)
- "label": Text overlay at location (auto-centers)
- "line": Animated path (auto-fits to show entire route)

RULES:
- All coordinates must be real [latitude, longitude] numbers
- Keep narration concise (TTS will read it aloud)
- Use vivid colors for visual appeal
- NO markdown, NO comments - just RAW JSON
- Timeline must be sorted chronologically
- Map automatically centers on each event - no need to specify zoom unless you want to override

Return ONLY the JSON object.`;

            document.getElementById('promptOut').innerText = prompt;
        }

        function copyPrompt() {
            navigator.clipboard.writeText(document.getElementById('promptOut').innerText);
            alert("✅ Prompt copied! Paste into ChatGPT/Claude.");
        }

        // --- SCRIPT ENGINE ---
        function runScript() {
            try {
                const raw = document.getElementById('jsonEditor').value;
                script = JSON.parse(raw);

                // Apply Theme
                setTheme(script.style || 'dark');

                // Reset
                step = 0;
                playing = false;
                clearLayers();
                map.setView(script.map.initialCenter, script.map.initialZoom, {
                    animate: false
                });

                // UI
                bootstrap.Modal.getInstance(document.getElementById('editorModal')).hide();
                showCard("READY", script.title || "Untitled Project");
                document.getElementById('narratorCard').classList.add('show');
                updatePlayBtn(false);

            } catch (e) {
                alert("❌ JSON Error: " + e.message);
            }
        }

        function setTheme(style) {
            map.eachLayer(l => {
                if (l instanceof L.TileLayer) map.removeLayer(l);
            });
            L.tileLayer(THEMES[style] || THEMES['dark'], {
                maxZoom: 19
            }).addTo(map);

            // Visual filters for readability
            const mapEl = document.getElementById('map');
            if (style === 'satellite') mapEl.style.filter = "brightness(1.2) contrast(1.1)";
            else if (style === 'dark') mapEl.style.filter = "brightness(0.95) contrast(1.15)";
            else mapEl.style.filter = "none";
        }

        function togglePlay() {
            if (!script) return alert("⚠️ Load a script first!");

            if (playing) {
                playing = false;
                synth.cancel();
                updatePlayBtn(false);
            } else {
                playing = true;
                updatePlayBtn(true);
                if (synth.paused) synth.resume();
                else playNext();
            }
        }

        function playNext() {
            if (!playing) return;
            if (step >= script.timeline.length) {
                playing = false;
                updatePlayBtn(false);
                showCard("END", "Story Complete.");
                return;
            }

            const event = script.timeline[step];

            // *** AUTO-CENTER CAMERA FOR EVERY EVENT ***
            autoCenterEvent(event);

            // Execute Visual (after camera moves)
            setTimeout(() => {
                executeVisual(event);
            }, 500);

            // Narration
            if (event.narration) {
                showCard(event.narration.title, event.narration.text);
                if (ttsOn) {
                    speak(event.narration.text, () => {
                        step++;
                        setTimeout(playNext, 600);
                    });
                } else {
                    setTimeout(() => {
                        step++;
                        playNext();
                    }, 3500);
                }
            } else {
                setTimeout(() => {
                    step++;
                    playNext();
                }, 2000);
            }
        }

        // *** NEW: AUTO-CENTER FUNCTION ***
        function autoCenterEvent(e) {
            const defaultZoom = {
                'marker': 10,
                'arrow': 10,
                'label': 9,
                'pan': 8,
                'zoom': e.zoom || 7,
                'circle': 7,
                'polygon': 6,
                'rectangle': 6,
                'line': 5
            };

            // Get target zoom (from JSON or default)
            const targetZoom = e.zoom || defaultZoom[e.type] || 6;

            switch (e.type) {
                case 'marker':
                case 'arrow':
                case 'label':
                case 'pan':
                case 'zoom':
                    // Single point - just flyTo
                    const coords = Array.isArray(e.location) ? e.location : [0, 0];
                    map.flyTo(coords, targetZoom, {
                        duration: 2,
                        easeLinearity: 0.25
                    });
                    break;

                case 'circle':
                    // Circle - calculate bounds from center + radius
                    const center = Array.isArray(e.location) ? e.location : [0, 0];
                    const radius = e.radius || 120000; // meters
                    const bounds = L.latLng(center).toBounds(radius * 2);
                    map.flyToBounds(bounds, {
                        padding: [50, 50],
                        duration: 2,
                        maxZoom: targetZoom
                    });
                    break;

                case 'polygon':
                case 'line':
                    // Multi-point - fit bounds to show all points
                    if (Array.isArray(e.location) && e.location.length > 0) {
                        const polyBounds = L.latLngBounds(e.location);
                        map.flyToBounds(polyBounds, {
                            padding: [80, 80],
                            duration: 2,
                            maxZoom: targetZoom
                        });
                    }
                    break;

                case 'rectangle':
                    // Rectangle - fit to provided bounds
                    if (Array.isArray(e.location) && e.location.length === 2) {
                        map.flyToBounds(e.location, {
                            padding: [50, 50],
                            duration: 2
                        });
                    }
                    break;
            }
        }

        // --- VISUAL EXECUTION ---
        function executeVisual(e) {
            const color = e.visual?.color || '#00D9FF';
            const opacity = e.visual?.opacity || 0.6;

            switch (e.type) {
                case 'marker':
                    addMarker(e.location, color);
                    break;
                case 'arrow':
                    addArrow(e.location, color);
                    break;
                case 'circle':
                    addCircle(e.location, color, opacity, e.radius);
                    break;
                case 'polygon':
                    addPolygon(e.location, color, opacity);
                    break;
                case 'rectangle':
                    addRectangle(e.location, color, opacity);
                    break;
                case 'label':
                    addLabel(e.location, e.label || e.narration?.title, color);
                    break;
                case 'line':
                    addLine(e.location, color);
                    break;
            }
        }

        function addMarker(coords, color) {
            const icon = L.divIcon({
                className: 'custom-marker',
                html: `<div class="pulse-dot" style="background:${color}; box-shadow: 0 0 0 0 ${color}CC;"></div>`,
                iconSize: [16, 16],
                iconAnchor: [8, 8]
            });
            const m = L.marker(coords, {
                icon
            }).addTo(map);
            layers.push(m);
        }

        function addArrow(coords, color) {
            const icon = L.divIcon({
                className: 'arrow-icon',
                html: `<div class="arrow-pointer" style="border-bottom-color:${color};"></div>`,
                iconSize: [30, 30],
                iconAnchor: [15, 30]
            });
            const m = L.marker(coords, {
                icon
            }).addTo(map);
            layers.push(m);
        }

        function addCircle(coords, color, opacity, radius) {
            const c = L.circle(coords, {
                color: color,
                fillColor: color,
                fillOpacity: opacity,
                radius: radius || 120000,
                weight: 2
            }).addTo(map);
            layers.push(c);
        }

        function addPolygon(coords, color, opacity) {
            const p = L.polygon(coords, {
                color: color,
                fillColor: color,
                fillOpacity: opacity,
                weight: 3
            }).addTo(map);
            layers.push(p);
        }

        function addRectangle(bounds, color, opacity) {
            const r = L.rectangle(bounds, {
                color: color,
                fillColor: color,
                fillOpacity: opacity,
                weight: 3
            }).addTo(map);
            layers.push(r);
        }

        function addLabel(coords, text, color) {
            const icon = L.divIcon({
                className: 'text-label',
                html: `<div class="map-label" style="border-color:${color}; color:${color};">${text}</div>`,
                iconAnchor: [0, 0]
            });
            const m = L.marker(coords, {
                icon
            }).addTo(map);
            layers.push(m);
        }

        function addLine(coords, color) {
            const line = L.polyline(coords, {
                color: color,
                weight: 4,
                opacity: 0.9,
                dashArray: '10, 10'
            }).addTo(map);
            layers.push(line);
        }

        function clearLayers() {
            layers.forEach(l => map.removeLayer(l));
            layers = [];
        }

        // --- HELPERS ---
        function showCard(title, text) {
            document.getElementById('locTitle').innerText = title || "INFO";
            document.getElementById('locText').innerText = text;

            const fonts = ['f-cinzel', 'f-play', 'f-orb', ''];
            const rand = fonts[Math.floor(Math.random() * fonts.length)];
            document.getElementById('locText').className = 'card-body ' + rand;

            document.getElementById('narratorCard').classList.add('show');
        }

        function speak(text, callback) {
            synth.cancel();
            const u = new SpeechSynthesisUtterance(text);
            u.rate = 0.95;

            const spinner = document.getElementById('ttsSpinner');
            spinner.style.display = 'inline-block';

            u.onend = () => {
                spinner.style.display = 'none';
                if (callback) callback();
            };
            synth.speak(u);
        }

        function updatePlayBtn(isPlaying) {
            const btn = document.getElementById('btnPlay');
            btn.innerHTML = isPlaying ? '<i class="bi bi-pause-fill"></i>' : '<i class="bi bi-play-fill"></i>';
        }

        function toggleSound() {
            ttsOn = !ttsOn;
            const btn = document.getElementById('btnSound');
            btn.innerHTML = ttsOn ? '<i class="bi bi-volume-up-fill"></i>' : '<i class="bi bi-volume-mute-fill"></i>';
            if (!ttsOn) synth.cancel();
        }

        function loadSample() {
            const sample = {
                "title": "Auto-Center Demo: India Geography",
                "style": "voyager",
                "map": {
                    "initialCenter": [20.5937, 78.9629],
                    "initialZoom": 4
                },
                "timeline": [{
                        "type": "marker",
                        "location": [28.6139, 77.2090],
                        "visual": {
                            "color": "#FF6B6B"
                        },
                        "narration": {
                            "title": "DELHI",
                            "text": "Our journey begins in Delhi, the capital. Watch as the map auto-centers."
                        }
                    },
                    {
                        "type": "arrow",
                        "location": [28.6129, 77.2295],
                        "visual": {
                            "color": "#FFD93D"
                        },
                        "narration": {
                            "title": "INDIA GATE",
                            "text": "Here is the India Gate memorial. The camera automatically focuses on this exact location."
                        }
                    },
                    {
                        "type": "line",
                        "location": [
                            [28.6139, 77.2090],
                            [27.1767, 78.0081],
                            [25.3176, 82.9739]
                        ],
                        "visual": {
                            "color": "#51CF66"
                        },
                        "narration": {
                            "title": "ROUTE",
                            "text": "This animated line connects Delhi, Agra, and Varanasi. The map auto-fits to show the entire route."
                        }
                    },
                    {
                        "type": "circle",
                        "location": [25.3176, 82.9739],
                        "visual": {
                            "color": "#9B59B6",
                            "opacity": 0.4
                        },
                        "narration": {
                            "title": "VARANASI REGION",
                            "text": "The camera auto-zooms out to show this entire circular region around Varanasi."
                        }
                    },
                    {
                        "type": "polygon",
                        "location": [
                            [8, 77],
                            [8, 78],
                            [9, 78],
                            [9, 77]
                        ],
                        "visual": {
                            "color": "#00D9FF",
                            "opacity": 0.3
                        },
                        "narration": {
                            "title": "KERALA",
                            "text": "Watch how the map automatically fits this entire polygon area representing Kerala backwaters."
                        }
                    },
                    {
                        "type": "label",
                        "location": [19.0760, 72.8777],
                        "label": "MUMBAI",
                        "visual": {
                            "color": "#FFD93D"
                        },
                        "narration": {
                            "title": "MUMBAI",
                            "text": "Finally, we auto-center on Mumbai's label on the western coast."
                        }
                    }
                ]
            };
            document.getElementById('jsonEditor').value = JSON.stringify(sample, null, 2);
        }
    </script>
</body>

</html>
